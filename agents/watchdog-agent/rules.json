{
  "version": "2.0.0",
  "description": "Remediation rules with Tier-1 auto-recovery",
  "auto_remediate": {
    "enabled": true,
    "tiers": {
      "tier1": {
        "description": "Safe, non-destructive, user-context actions",
        "allowed": true,
        "max_attempts": 2,
        "cooldown_minutes": 360
      },
      "tier2": {
        "description": "Requires manual approval",
        "allowed": false
      }
    }
  },
  "checks": [
    {
      "id": "jan_greeting_stale",
      "condition": "cron_jobs.jan_greeting.status == 'stale'",
      "severity": "medium",
      "recovery_actions": [
        {
          "id": "retrigger_jan_greeting",
          "tier": 1,
          "python_action": "retrigger_jan_greeting",
          "max_attempts": 2,
          "cooldown_minutes": 360,
          "evidence_files": [
            "skills/gmail/jan_greeting_log.json"
          ]
        }
      ]
    },
    {
      "id": "npmrc_prefix_conflict",
      "condition": "environment.npm_healthy == false",
      "severity": "medium",
      "recovery_actions": [
        {
          "id": "fix_npmrc_prefix",
          "tier": 1,
          "python_action": "fix_npmrc_prefix",
          "max_attempts": 2,
          "cooldown_minutes": 360,
          "evidence_files": [
            "~/.npmrc",
            "~/.npmrc.backup-*"
          ]
        }
      ]
    },
    {
      "id": "agent_stale_low_priority",
      "condition": "agents.*.status == 'stale'",
      "severity": "low",
      "recovery_actions": []
    }
  ],
  "alert_escalation": {
    "critical": ["environment.node_available == false"],
    "high": ["cron.morning_brief.status == 'stale'"],
    "medium": [
      "cron.jan_greeting.status == 'stale' AND recovery.failed_count >= 2",
      "environment.npm_healthy == false AND recovery.failed_count >= 2"
    ],
    "low": ["agent.status == 'stale'"]
  },
  "notification_channels": {
    "telegram": true,
    "log_only": false
  }
}
